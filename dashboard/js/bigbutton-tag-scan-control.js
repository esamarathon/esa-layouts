(()=>{"use strict";var e,t={2:(e,t,n)=>{var s=n(8138),r=n.n(s),a=n(829),i=n(5803),o=n(708),l=n(4170),c=function(e,t,n,s){var r,a=arguments.length,i=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};const d=new a.SpeedcontrolUtilBrowser(nodecg),u={bids:nodecg.Replicant("bids"),bigbuttonPlayerMap:nodecg.Replicant("bigbuttonPlayerMap"),commentators:nodecg.Replicant("commentators"),countdown:nodecg.Replicant("countdown"),currentRunDelay:nodecg.Replicant("currentRunDelay"),donationReader:nodecg.Replicant("donationReader"),donationsToRead:nodecg.Replicant("donationsToRead"),donationTotal:nodecg.Replicant("donationTotal"),donationTotalMilestones:nodecg.Replicant("donationTotalMilestones"),gameLayouts:nodecg.Replicant("gameLayouts"),obsData:nodecg.Replicant("obsData"),omnibar:nodecg.Replicant("omnibar"),otherStreamData:nodecg.Replicant("otherStreamData"),prizes:nodecg.Replicant("prizes"),runDataActiveRun:d.runDataActiveRun,runDataActiveRunSurrounding:d.runDataActiveRunSurrounding,runDataArray:d.runDataArray,serverTimestamp:nodecg.Replicant("serverTimestamp"),streamDeckData:nodecg.Replicant("streamDeckData"),timer:d.timer,ttsVoices:nodecg.Replicant("ttsVoices"),upcomingRunID:nodecg.Replicant("upcomingRunID"),videoPlayer:nodecg.Replicant("videoPlayer")};let p,h=class extends l.g4{constructor(){super(...arguments),this.reps={}}get repsTyped(){return this.reps}setState({name:e,val:t}){i.Z.set(this.reps,e,r()(t))}setReplicant({name:e,val:t}){i.Z.set(this.reps,e,r()(t)),u[e].value=r()(t)}};c([l.mm],h.prototype,"setState",null),c([l.mm],h.prototype,"setReplicant",null),h=c([(0,l.Yl)({name:"ReplicantModule",namespaced:!0})],h);const v=(0,o.uD)("ReplicantModule");var g=n(9459),m=n(5925);n(4807),n(7023),n(5654),n(779),n(8793);var f=n(6635),y=function(e,t,n,s){var r,a=arguments.length,i=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};let b=class extends i.Z{constructor(){super(...arguments),this.tagScanned=!1,this.scannedData=null}get mapArr(){return Object.entries(this.bbpMap)}get activeRunInArr(){return this.runArray.find((e=>{var t;return e.id===(null===(t=this.activeRun)||void 0===t?void 0:t.id)}))}get allPlayersRun(){var e;return(null===(e=this.activeRunInArr)||void 0===e?void 0:e.teams.reduce(((e,t)=>e.concat(...t.players)),[]))||[]}get allScannedPlayers(){return Object.values(this.bbpMap).reduce(((e,t)=>e.concat(...t)),[])}get leftToScan(){return(0,f.differenceWith)(this.allPlayersRun,this.allScannedPlayers,((e,t)=>e.name.toLowerCase()===t.user.displayName.toLowerCase()))}get disableChanges(){return"stopped"!==this.timer.state}force(){nodecg.sendMessage("bigbuttonForceFillPlayers")}reset(){nodecg.sendMessage("bigbuttonResetPlayers")}created(){nodecg.listenFor("bigbuttonTagScanned",(({state:e,data:t})=>{window.clearTimeout(this.tagScanTimeout),this.tagScanned=e||!0,this.scannedData=t,this.tagScanTimeout=window.setTimeout((()=>{this.tagScanned=!1,this.scannedData=null}),7e3)}))}};y([v.State((e=>e.reps.timer))],b.prototype,"timer",void 0),y([v.State((e=>e.reps.runDataArray))],b.prototype,"runArray",void 0),y([v.State((e=>e.reps.runDataActiveRun))],b.prototype,"activeRun",void 0),y([v.State((e=>e.reps.bigbuttonPlayerMap))],b.prototype,"bbpMap",void 0),b=y([m.default],b);const _=b;var S=n(5440),R=n(7618),D=n.n(R),w=n(690),C=n(6255);const k=C.Z;var x,P=n(7653),$=n(1954),O=n(5010),B=n(9405),T=n(2377),j=n(6248);!function(e){e.xSmall="12px",e.small="16px",e.default="24px",e.medium="28px",e.large="36px",e.xLarge="40px"}(x||(x={}));const A=(0,j.Z)(P.Z,$.Z,O.Z,B.Z).extend({name:"v-icon",props:{dense:Boolean,disabled:Boolean,left:Boolean,right:Boolean,size:[Number,String],tag:{type:String,required:!1,default:"i"}},computed:{medium:()=>!1,hasClickListener(){return Boolean(this.listeners$.click||this.listeners$["!click"])}},methods:{getIcon(){let e="";return this.$slots.default&&(e=this.$slots.default[0].text.trim()),(0,T.RB)(this,e)},getSize(){const e={xSmall:this.xSmall,small:this.small,medium:this.medium,large:this.large,xLarge:this.xLarge},t=(0,T.XP)(e).find((t=>e[t]));return t&&x[t]||(0,T.kb)(this.size)},getDefaultData(){return{staticClass:"v-icon notranslate",class:{"v-icon--disabled":this.disabled,"v-icon--left":this.left,"v-icon--link":this.hasClickListener,"v-icon--right":this.right,"v-icon--dense":this.dense},attrs:{"aria-hidden":!this.hasClickListener,disabled:this.hasClickListener&&this.disabled,type:this.hasClickListener?"button":void 0,...this.attrs$},on:this.listeners$}},getSvgWrapperData(){const e=this.getSize(),t={...this.getDefaultData(),style:e?{fontSize:e,height:e,width:e}:void 0};return this.applyColors(t),t},applyColors(e){e.class={...e.class,...this.themeClasses},this.setTextColor(this.color,e)},renderFontIcon(e,t){const n=[],s=this.getDefaultData();let r="material-icons";const a=e.indexOf("-"),i=a<=-1;i?n.push(e):(r=e.slice(0,a),function(e){return["fas","far","fal","fab","fad","fak"].some((t=>e.includes(t)))}(r)&&(r="")),s.class[r]=!0,s.class[e]=!i;const o=this.getSize();return o&&(s.style={fontSize:o}),this.applyColors(s),t(this.hasClickListener?"button":this.tag,s,n)},renderSvgIcon(e,t){const n={class:"v-icon__svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":!0}},s=this.getSize();return s&&(n.style={fontSize:s,height:s,width:s}),t(this.hasClickListener?"button":"span",this.getSvgWrapperData(),[t("svg",n,[t("path",{attrs:{d:e}})])])},renderSvgIconComponent(e,t){const n={class:{"v-icon__component":!0}},s=this.getSize();s&&(n.style={fontSize:s,height:s,width:s}),this.applyColors(n);const r=e.component;return n.props=e.props,n.nativeOn=n.on,t(this.hasClickListener?"button":"span",this.getSvgWrapperData(),[t(r,n)])}},render(e){const t=this.getIcon();return"string"==typeof t?function(e){return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4}(t)?this.renderSvgIcon(t,e):this.renderFontIcon(t,e):this.renderSvgIconComponent(t,e)}}),I=i.Z.extend({name:"v-icon",$_wrapperFor:A,functional:!0,render(e,{data:t,children:n}){let s="";return t.domProps&&(s=t.domProps.textContent||t.domProps.innerHTML||s,delete t.domProps.textContent,delete t.domProps.innerHTML),e(A,t,s?[s]:n)}}),Z=I;var M=n(9085);const L=i.Z.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}});var z=n(8298);const N=(0,j.Z)(w.Z,M.Z,L).extend({name:"v-alert",props:{border:{type:String,validator:e=>["top","right","bottom","left"].includes(e)},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:e=>"string"==typeof e||!1===e},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:e=>["info","error","success","warning"].includes(e)},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let e={staticClass:"v-alert__border",class:{[`v-alert__border--${this.border}`]:!0}};return this.coloredBorder&&(e=this.setBackgroundColor(this.computedColor,e),e.class["v-alert__border--has-color"]=!0),this.$createElement("div",e)},__cachedDismissible(){if(!this.dismissible)return null;const e=this.iconColor;return this.$createElement(k,{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(Z,{props:{color:e}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(Z,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const e={...w.Z.options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(e[`v-alert--border-${this.border}`]=!0),e},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"==typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&`$${this.type}`)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||B.Z.options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&(0,z.fK)("outline","outlined",this)},methods:{genWrapper(){const e=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible];return this.$createElement("div",{staticClass:"v-alert__wrapper"},e)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert(){let e={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};return this.coloredBorder||(e=(this.hasText?this.setTextColor:this.setBackgroundColor)(this.computedColor,e)),this.$createElement("div",e,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(e){const t=this.genAlert();return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[t]):t}});var E=n(1883),F=(0,S.Z)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[["success_player","success_comm"].includes(e.tagScanned)?n("v-alert",{attrs:{type:"success"}},["success_player"===e.tagScanned?[e._v("\n      "+e._s(e.scannedData.user.displayName)+" scanned in as player on button\n      "+e._s(e.scannedData.flagcarrier.id)+"\n    ")]:"success_comm"===e.tagScanned?[e._v("\n      "+e._s(e.scannedData.user.displayName)+" scanned in as commentator on button\n      "+e._s(e.scannedData.flagcarrier.id)+"\n    ")]:e._e()],2):"fail_player"===e.tagScanned?n("v-alert",{attrs:{type:"error"}},[e._v("\n    "+e._s(e.scannedData.user.displayName)+" scanned in on button\n    "+e._s(e.scannedData.flagcarrier.id)+" but already used by another team!\n  ")]):e.tagScanned?n("v-alert",[e._v("\n    "+e._s(e.scannedData.user.displayName)+" scanned in on button\n    "+e._s(e.scannedData.flagcarrier.id)+" but no action is needed.\n  ")]):n("v-alert",{staticClass:"font-italic"},[e._v("\n    Scan notifications will appear here.\n  ")]),e._v(" "),e.activeRun&&e.activeRunInArr?n("div",[e.activeRun.teams.length?n("div",[e._v("\n      All players scanned!\n    ")]):n("div",[n("div",[n("span",{staticClass:"font-weight-bold"},[e._v("Players left to scan:")]),e._v(" "),e.leftToScan.length?n("span",[e._v(e._s(e.leftToScan.map((function(e){return e.name})).join(", ")))]):n("span",[e._v("All scanned")])]),e._v(" "),n("div",[n("span",{staticClass:"font-weight-bold"},[e._v("Players currently scanned:")]),e._v(" "),e.allScannedPlayers.length?n("span",[e._v(e._s(e.allScannedPlayers.map((function(e){return e.user.displayName})).join(", ")))]):n("span",[e._v("None")])])]),e._v(" "),n("div",{staticClass:"mt-2"},[n("span",{staticClass:"text-h6"},[e._v("Button to Player Mappings")]),e._v(" "),e.mapArr.length?e._l(e.mapArr,(function(t){var s=t[0],r=t[1];return n("div",{key:s},[r.length?[n("span",{staticClass:"font-weight-bold"},[e._v("Button "+e._s(s)+":")]),e._v(" "),n("span",[e._v(e._s(r.map((function(e){return e.user.displayName})).join(", ")))])]:e._e()],2)})):n("div",[e._v("No button to player mapping to show.")])],2),e._v(" "),n("v-btn",{staticClass:"mt-2",attrs:{color:"red",block:"",disabled:e.disableChanges||!e.leftToScan.length},on:{click:e.force}},[n("v-icon",{staticClass:"mr-2"},[e._v("mdi-alert")]),e._v(" Fill open slots\n    ")],1),e._v(" "),n("v-btn",{staticClass:"mt-2",attrs:{block:"",disabled:e.disableChanges},on:{click:e.reset}},[e._v("\n      Reset all player tag scanning\n    ")])],1):n("div",[e._v("\n    There is currently no active run available.\n  ")])],1)}),[],!1,null,null,null);const W=F.exports;D()(F,{VAlert:N,VApp:E.Z,VBtn:C.Z,VIcon:I});var V=n(8586);i.Z.use(V.ZP);let q=class extends l.g4{get reps(){return this.context.rootState.ReplicantModule.reps}};q=function(e,t,n,s){var r,a=arguments.length,i=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,s);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}([(0,l.Yl)({name:"OurModule"})],q);const H=new V.yh({strict:!1,state:{},modules:{ReplicantModule:h,OurModule:q}}),X=H;(0,l.rT)(q,H),function(e){return t=this,n=void 0,r=function*(){Object.keys(u).forEach((t=>{u[t].on("change",(n=>{e.commit("ReplicantModule/setState",{name:t,val:n})}))})),yield NodeCG.waitForReplicants(...Object.keys(u).map((e=>u[e]))),p=(0,l.rT)(h,e)},new((s=void 0)||(s=Promise))((function(e,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(i,o)}l((r=r.apply(t,n||[])).next())}));var t,n,s,r}(X).then((()=>{new i.Z({vuetify:g.Z,store:X,el:"#App",render:e=>e(W)})}))},779:(e,t,n)=>{"undefined"!=typeof Reflect&&Reflect.getMetadata},9405:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n(5803).Z.extend().extend({name:"themeable",provide(){return{theme:this.themeableProvide}},inject:{theme:{default:{isDark:!1}}},props:{dark:{type:Boolean,default:null},light:{type:Boolean,default:null}},data:()=>({themeableProvide:{isDark:!1}}),computed:{appIsDark(){return this.$vuetify.theme.dark||!1},isDark(){return!0===this.dark||!0!==this.light&&this.theme.isDark},themeClasses(){return{"theme--dark":this.isDark,"theme--light":!this.isDark}},rootIsDark(){return!0===this.dark||!0!==this.light&&this.appIsDark},rootThemeClasses(){return{"theme--dark":this.rootIsDark,"theme--light":!this.rootIsDark}}},watch:{isDark:{handler(e,t){e!==t&&(this.themeableProvide.isDark=this.isDark)},immediate:!0}}})},9085:(e,t,n)=>{n.d(t,{d:()=>r,Z:()=>a});var s=n(5803);function r(e="value",t="input"){return s.Z.extend({name:"toggleable",model:{prop:e,event:t},props:{[e]:{required:!1}},data(){return{isActive:!!this[e]}},watch:{[e](e){this.isActive=!!e},isActive(n){!!n!==this[e]&&this.$emit(t,n)}}})}const a=r()},2377:(e,t,n)=>{n.d(t,{qw:()=>r,vO:()=>a,ji:()=>i,kb:()=>o,Do:()=>c,RB:()=>d,XP:()=>u,uZ:()=>p,Ee:()=>h});let s=!1;try{if("undefined"!=typeof window){const e=Object.defineProperty({},"passive",{get:()=>{s=!0}});window.addEventListener("testListener",e,e),window.removeEventListener("testListener",e,e)}}catch(e){console.warn(e)}function r(e,t,n){const s=t.length-1;if(s<0)return void 0===e?n:e;for(let r=0;r<s;r++){if(null==e)return n;e=e[t[r]]}return null==e||void 0===e[t[s]]?n:e[t[s]]}function a(e,t,n){return null!=e&&t&&"string"==typeof t?void 0!==e[t]?e[t]:r(e,(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),n):n}function i(e,t){const n={};for(let s=0;s<t.length;s++){const r=t[s];void 0!==e[r]&&(n[r]=e[r])}return n}function o(e,t="px"){return null==e||""===e?void 0:isNaN(+e)?String(e):`${Number(e)}${t}`}function l(e){return null!==e&&"object"==typeof e}const c=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function d(e,t){const n=e.$vuetify.icons.component;if(t.startsWith("$")){const n=a(e,`$vuetify.icons.values.${t.split("$").pop().split(".").pop()}`,t);if("string"!=typeof n)return n;t=n}return null==n?t:{component:n,props:{icon:t}}}function u(e){return Object.keys(e)}function p(e,t=0,n=1){return Math.max(t,Math.min(n,e))}function h(e={},t={}){for(const n in t){const s=e[n],r=t[n];l(s)&&l(r)?e[n]=h(s,r):e[n]=r}return e}}},n={};function s(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=t,e=[],s.O=(t,n,r,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,r,a]=e[d],o=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(o=!1,a<i&&(i=a));if(o){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={747:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,o,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(l)var d=l(s)}for(t&&t(n);c<i.length;c++)a=i[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=s.O(void 0,[888,821,291,635],(()=>s(2)));r=s.O(r)})();