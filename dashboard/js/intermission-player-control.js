(()=>{var e,t={8138:e=>{var t=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,r,o;try{t=Map}catch(e){t=function(){}}try{r=Set}catch(e){r=function(){}}try{o=Promise}catch(e){o=function(){}}function n(i,s,a,c,d){"object"==typeof s&&(a=s.depth,c=s.prototype,d=s.includeNonEnumerable,s=s.circular);var u=[],p=[],v="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===a&&(a=1/0),function i(a,f){if(null===a)return null;if(0===f)return a;var y,h;if("object"!=typeof a)return a;if(e(a,t))y=new t;else if(e(a,r))y=new r;else if(e(a,o))y=new o((function(e,t){a.then((function(t){e(i(t,f-1))}),(function(e){t(i(e,f-1))}))}));else if(n.__isArray(a))y=[];else if(n.__isRegExp(a))y=new RegExp(a.source,l(a)),a.lastIndex&&(y.lastIndex=a.lastIndex);else if(n.__isDate(a))y=new Date(a.getTime());else{if(v&&Buffer.isBuffer(a))return y=Buffer.allocUnsafe?Buffer.allocUnsafe(a.length):new Buffer(a.length),a.copy(y),y;e(a,Error)?y=Object.create(a):void 0===c?(h=Object.getPrototypeOf(a),y=Object.create(h)):(y=Object.create(c),h=c)}if(s){var m=u.indexOf(a);if(-1!=m)return p[m];u.push(a),p.push(y)}for(var g in e(a,t)&&a.forEach((function(e,t){var r=i(t,f-1),o=i(e,f-1);y.set(r,o)})),e(a,r)&&a.forEach((function(e){var t=i(e,f-1);y.add(t)})),a){var b;h&&(b=Object.getOwnPropertyDescriptor(h,g)),b&&null==b.set||(y[g]=i(a[g],f-1))}if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(a);for(g=0;g<_.length;g++){var w=_[g];(!(P=Object.getOwnPropertyDescriptor(a,w))||P.enumerable||d)&&(y[w]=i(a[w],f-1),P.enumerable||Object.defineProperty(y,w,{enumerable:!1}))}}if(d){var x=Object.getOwnPropertyNames(a);for(g=0;g<x.length;g++){var P,C=x[g];(P=Object.getOwnPropertyDescriptor(a,C))&&P.enumerable||(y[C]=i(a[C],f-1),Object.defineProperty(y,C,{enumerable:!1}))}}return y}(i,a)}function i(e){return Object.prototype.toString.call(e)}function l(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return n.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},n.__objToStr=i,n.__isDate=function(e){return"object"==typeof e&&"[object Date]"===i(e)},n.__isArray=function(e){return"object"==typeof e&&"[object Array]"===i(e)},n.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===i(e)},n.__getRegExpFlags=l,n}();e.exports&&(e.exports=t)},842:(e,t,r)=>{"use strict";var o=r(5803),n=r(9459),i=r(5925);r(4807),r(7023),r(5654),r(779),r(8793);var l=r(5612),s=r(8586),a=u("computed",s.rn),c=(u("computed",s.Se),u("methods",s.nv)),d=u("methods",s.OI);function u(e,t){function r(r,o){return(0,i.createDecorator)((function(n,i){n[e]||(n[e]={});var l,s=((l={})[i]=r,l);n[e][i]=void 0!==o?t(o,s)[i]:t(s)[i]}))}return function(e,t){if("string"==typeof t){var o=t,n=e;return r(o,void 0)(n,o)}return r(e,function(e){var t=e&&e.namespace;if("string"==typeof t)return"/"!==t[t.length-1]?t+"/":t}(t))}}var p=function(e,t,r,o){var n,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(i<3?n(l):i>3?n(t,r,l):n(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l};let v=class extends o.Z{constructor(){super(...arguments),this.searchTerm=null}get filteredVideos(){return this.videos.filter((e=>{const t=this.searchTerm?this.searchTerm.toLowerCase():"";return!t||t&&e.name.toLowerCase().includes(t)})).map((e=>[this.playCount(e.sum),e])).sort().map((e=>e[1]))}playCount(e){return this.videoPlayer.plays[e]||0}};p([a],v.prototype,"videos",void 0),p([a],v.prototype,"videoPlayer",void 0),p([d],v.prototype,"playlistAdd",void 0),v=p([i.default],v);const f=v;var y=r(5440),h=r(7618),m=r.n(h),g=r(6255),b=r(7019),_=r(5861),w=r(1080),x=(0,y.Z)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-toolbar-title",[e._v("\n    Available Videos\n  ")]),e._v(" "),r("div",{style:{"margin-top":"10px"}},[e.videos.length?[r("v-text-field",{attrs:{filled:"",clearable:"",label:"Search...","append-icon":"mdi-magnify",messages:"\n          "+e.filteredVideos.length+" video"+(1===e.filteredVideos.length?"":"s")+" found.\n        "},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}),e._v(" "),r("div",{style:{height:"250px","overflow-y":"scroll","overflow-x":"hidden",margin:0,padding:"10px"}},e._l(e.filteredVideos,(function(t){return r("div",{key:t.sum,staticClass:"d-flex align-center",style:{margin:"5px","margin-left":0},attrs:{value:t.sum}},[r("div",{staticClass:"d-flex align-center",style:{"margin-right":"10px"}},[r("v-btn",{style:{"margin-right":"10px"},attrs:{icon:"",outlined:"",small:""},on:{click:function(r){return e.playlistAdd(t.sum)}}},[r("v-icon",{attrs:{small:""}},[e._v("\n                mdi-playlist-plus\n              ")])],1),e._v(" "),r("v-icon",[e._v("\n              mdi-play\n            ")]),e._v(" "),r("div",{style:{width:"25px","text-align":"center"}},[e._v("\n              "+e._s(e.playCount(t.sum))+"\n            ")])],1),e._v(" "),r("div",{attrs:{title:t.name}},[e._v("\n            "+e._s(t.name)+"\n          ")])])})),0)]:r("span",{style:{"font-style":"italic"}},[e._v('\n      Add videos under "Assets" > "esa-layouts" > "Videos".\n    ')])],2)],1)}),[],!1,null,null,null);const P=x.exports;m()(x,{VBtn:g.Z,VIcon:b.Z,VTextField:_.Z,VToolbarTitle:w.qW});var C=r(5043),O=r(4048),j=r.n(O);let Z=class extends o.Z{};Z=function(e,t,r,o){var n,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(i<3?n(l):i>3?n(t,r,l):n(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l}([i.default],Z);const R=Z;var E=r(8821),S=(0,y.Z)(R,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-card",{style:{"text-align":"center",padding:"5px","margin-top":"10px","white-space":"nowrap",overflow:"hidden"}},[e._t("default")],2)}),[],!1,null,null,null);const $=S.exports;m()(S,{VCard:E.Z});var B=function(e,t,r,o){var n,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(i<3?n(l):i>3?n(t,r,l):n(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l};let V=class extends o.Z{getName(e){var t;return null===(t=this.videos.find((t=>t.sum===e)))||void 0===t?void 0:t.name}onVideoPlayerChange(){this.localEdits||this.playlistRefresh()}};B([a],V.prototype,"videos",void 0),B([a],V.prototype,"videoPlayer",void 0),B([(0,C.H)("updateNewPlaylist","newPlaylist")],V.prototype,"newPlaylist",void 0),B([a],V.prototype,"localEdits",void 0),B([d],V.prototype,"playlistAdd",void 0),B([d],V.prototype,"playlistUpdateCommercial",void 0),B([d],V.prototype,"playlistRemove",void 0),B([d],V.prototype,"playlistRefresh",void 0),B([(0,l.R)("videoPlayer",{immediate:!0})],V.prototype,"onVideoPlayerChange",null),V=B([(0,i.default)({components:{Draggable:j(),MediaCard:$}})],V);const k=V;var T=r(690);const A=g.Z;var D=r(5095),I=r(9085),N=r(9405),M=r(9042),L=r(6248),U=r(8298);const F=(0,L.Z)(T.Z,I.Z,M.Z).extend({name:"v-alert",props:{border:{type:String,validator:e=>["top","right","bottom","left"].includes(e)},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:e=>"string"==typeof e||!1===e},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:e=>["info","error","success","warning"].includes(e)},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let e={staticClass:"v-alert__border",class:{[`v-alert__border--${this.border}`]:!0}};return this.coloredBorder&&(e=this.setBackgroundColor(this.computedColor,e),e.class["v-alert__border--has-color"]=!0),this.$createElement("div",e)},__cachedDismissible(){if(!this.dismissible)return null;const e=this.iconColor;return this.$createElement(A,{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(D.Z,{props:{color:e}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(D.Z,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const e={...T.Z.options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(e[`v-alert--border-${this.border}`]=!0),e},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"==typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&`$${this.type}`)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||N.Z.options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&(0,U.fK)("outline","outlined",this)},methods:{genWrapper(){const e=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible];return this.$createElement("div",{staticClass:"v-alert__wrapper"},e)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert(){let e={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};return this.coloredBorder||(e=(this.hasText?this.setTextColor:this.setBackgroundColor)(this.computedColor,e)),this.$createElement("div",e,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(e){const t=this.genAlert();return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[t]):t}});var W=(0,y.Z)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-toolbar-title",[e._v("\n    Playlist\n  ")]),e._v(" "),r("v-alert",{directives:[{name:"show",rawName:"v-show",value:e.localEdits,expression:"localEdits"}],style:{"margin-top":"5px"},attrs:{type:"warning",dense:""}},[e._v("\n    Local changes have been made.\n  ")]),e._v(" "),e.newPlaylist.length?e._e():r("media-card",{style:{"font-style":"italic"}},[e._v("\n    Add videos using the list above.\n  ")]),e._v(" "),r("draggable",{model:{value:e.newPlaylist,callback:function(t){e.newPlaylist=t},expression:"newPlaylist"}},e._l(e.newPlaylist,(function(t,o){var n=t.sum,i=t.commercial;return r("media-card",{key:n+"_"+o,staticClass:"d-flex align-center"},[r("v-text-field",{style:{"max-width":"75px"},attrs:{value:i,type:"number","hide-details":"",outlined:"",dense:"",spellcheck:"false",autocomplete:"off",step:"30",min:"0"},on:{input:function(t){return e.playlistUpdateCommercial({i:o,length:t})}}}),e._v(" "),r("div",{staticClass:"d-flex justify-center flex-grow-1",style:{overflow:"hidden","font-style":e.getName(n)?void 0:"italic"}},[n?[e._v("\n          "+e._s(e.getName(n)||"Could not find video name.")+"\n        ")]:[e._v("\n          Commercial w/o Video\n        ")]],2),e._v(" "),r("v-icon",{staticClass:"mr-1",on:{click:function(t){return e.playlistRemove(o)}}},[e._v("\n        mdi-delete\n      ")])],1)})),1),e._v(" "),r("v-btn",{staticClass:"mt-3",attrs:{block:""},on:{click:function(t){return e.playlistAdd()}}},[e._v("Add Commercial w/o Video to Playlist")])],1)}),[],!1,null,null,null);const q=W.exports;m()(W,{VAlert:F,VBtn:g.Z,VIcon:b.Z,VTextField:_.Z,VToolbarTitle:w.qW});var H=function(e,t,r,o){var n,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(i<3?n(l):i>3?n(t,r,l):n(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l};let G=class extends o.Z{constructor(){super(...arguments),this.cfg=nodecg.bundleConfig}get name(){var e;return null===(e=this.videos.find((e=>e.sum===this.videoPlayer.current)))||void 0===e?void 0:e.name}emergencyStop(){nodecg.sendMessage("stopIntermissionPlayerEarly")}};H([a],G.prototype,"videos",void 0),H([a],G.prototype,"videoPlayer",void 0),G=H([i.default],G);const K=G;var z=(0,y.Z)(K,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.videoPlayer.playing,expression:"videoPlayer.playing"}],style:{"text-align":"center"}},[r("span",{staticClass:"font-weight-bold"},[e._v("Currently Playing:")]),e._v(" "),r("br"),e.name?r("span",[e._v(e._s(e.name))]):r("span",[e._v("Unknown (Probably Commercial w/o Video)")]),e._v(" "),r("v-btn",{staticClass:"mt-2",attrs:{color:"red",block:""},on:{click:e.emergencyStop}},[e._v("Emergency Stop")])],1)}),[],!1,null,null,null);const J=z.exports;m()(z,{VBtn:g.Z});var Q=function(e,t,r,o){var n,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(i<3?n(l):i>3?n(t,r,l):n(t,r))||l);return i>3&&l&&Object.defineProperty(t,r,l),l};let X=class extends o.Z{};Q([a],X.prototype,"disableSave",void 0),Q([d],X.prototype,"playlistRefresh",void 0),Q([c],X.prototype,"save",void 0),X=Q([(0,i.default)({components:{AvailableVideos:P,Playlist:q,CurrentVideoInfo:J}})],X);const Y=X;var ee=r(1883),te=r(338),re=(0,y.Z)(Y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("available-videos"),e._v(" "),r("playlist",{style:{"margin-top":"20px"}}),e._v(" "),r("div",{staticClass:"d-flex",style:{"margin-top":"20px"}},[r("v-btn",{staticClass:"flex-grow-1",attrs:{loading:e.disableSave,disabled:e.disableSave},on:{click:function(t){return e.save()}}},[e._v("\n      Save\n    ")]),e._v(" "),r("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[r("v-btn",e._g({style:{"margin-left":"5px"},on:{click:function(t){return e.playlistRefresh()}}},o),[r("v-icon",[e._v("\n            mdi-refresh\n          ")])],1)]}}])},[e._v(" "),r("span",[e._v("Revert Local Changes")])])],1),e._v(" "),r("current-video-info",{style:{"margin-top":"10px"}})],1)}),[],!1,null,null,null);const oe=re.exports;m()(re,{VApp:ee.Z,VBtn:g.Z,VIcon:b.Z,VTooltip:te.Z});var ne=r(8138),ie=r.n(ne),le=function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function l(e){try{a(o.next(e))}catch(e){i(e)}}function s(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,s)}a((o=o.apply(e,t||[])).next())}))};let se;o.Z.use(s.ZP);const ae={videoPlayer:nodecg.Replicant("videoPlayer"),videos:nodecg.Replicant("assets:videos")};function ce(e){o.Z.set(e.state,"localEdits",!0),window.clearTimeout(se),se=window.setTimeout((()=>{e.commit("playlistRefresh")}),3e4)}const de=new s.ZP.Store({state:{disableSave:!1,localEdits:!1,newPlaylist:[]},mutations:{setState(e,{name:t,val:r}){o.Z.set(e,t,r)},updateNewPlaylist(e,t){o.Z.set(e,"newPlaylist",t),ce(de)},playlistAdd(e,t){e.newPlaylist.push({sum:t,commercial:0}),ce(de)},playlistUpdateCommercial(e,{i:t,length:r}){e.newPlaylist[t].commercial=Number.isNaN(r)?0:Number(r)},playlistRemove(e,t){e.newPlaylist.splice(t,1),ce(de)},playlistRefresh(e){var t;o.Z.set(e,"newPlaylist",ie()((null===(t=ae.videoPlayer.value)||void 0===t?void 0:t.playlist)||[])),o.Z.set(e,"localEdits",!1)}},actions:{save({state:e}){return le(this,void 0,void 0,(function*(){o.Z.set(e,"disableSave",!0),void 0!==ae.videoPlayer.value&&(ae.videoPlayer.value.playlist=ie()(e.newPlaylist)),yield new Promise((e=>{setTimeout(e,1e3)})),o.Z.set(e,"disableSave",!1),window.clearTimeout(se),o.Z.set(e,"localEdits",!1)}))}}});Object.keys(ae).forEach((e=>{ae[e].on("change",(t=>{de.commit("setState",{name:e,val:ie()(t)})}))})),le(void 0,void 0,void 0,(function*(){return yield NodeCG.waitForReplicants(...Object.keys(ae).map((e=>ae[e]))),de})).then((e=>{new o.Z({vuetify:n.Z,store:e,el:"#App",render:e=>e(oe)})}))},779:(e,t,r)=>{"use strict";"undefined"!=typeof Reflect&&Reflect.getMetadata},5043:(e,t,r)=>{"use strict";const o=r(5925);t.H=function(e,t){return o.createDecorator(((r,o)=>{r.computed||(r.computed={}),r.computed[o]={get(){return"string"==typeof t?t?(e=t,r=this.$store.state,e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce((function(e,t){return e[t]}),r)):this.$store.state[o]:t?t(this.$store.state):void 0;var e,r},set(t){this.$store.commit(e,t)}}}))}}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e].call(i.exports,i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,r,n,i)=>{if(!r){var l=1/0;for(d=0;d<e.length;d++){for(var[r,n,i]=e[d],s=!0,a=0;a<r.length;a++)(!1&i||l>=i)&&Object.keys(o.O).every((e=>o.O[e](r[a])))?r.splice(a--,1):(s=!1,i<l&&(l=i));if(s){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,n,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={159:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,i,[l,s,a]=r,c=0;if(l.some((t=>0!==e[t]))){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);if(a)var d=a(o)}for(t&&t(r);c<l.length;c++)i=l[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=o.O(void 0,[888,873,314,116,674,731],(()=>o(842)));n=o.O(n)})();