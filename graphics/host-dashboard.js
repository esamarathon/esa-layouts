"use strict";$((()=>{var e=$("#donationTotal"),a=$("#prizesContainer"),n=$("#bidsContainer"),s=$("#runsContainer"),i=$('<div class="prize"><span class="prizeName"></span><br>Provided by <span class="prizeProvider"></span><br>minimum donation <span class="prizeMinDonation"></span><br>Ends: <span class="prizeEnd"></span></div>'),o=$('<div class="bid"><span class="bidGame"></span><br><span class="bidName"></span></div>'),t=$('<div class="run"><span class="justMissed">YOU HAVE JUST WATCHED<br></span><span class="gameName"></span><br><span class="gameCategory"></span><br><span class="gameConsole"></span><br><span class="gameRunners"></span><br><span class="gameTime"></span><br><span class="gameFinal"></span></div>'),r=nodecg.Replicant("donationTotal");r.on("change",(a=>{e.html(f(r.value,!0))}));const l=nodecg.Replicant("assets:videos");nodecg.Replicant("videoPlayer").on("change",(e=>{const a=l.value.find((a=>a.sum===e.selected));e.selected&&a?$("#videoName").text(a.name):$("#videoName").text("none currently")})),nodecg.Replicant("prizes").on("change",(e=>{a.html(""),e.forEach((e=>{var n=i.clone();$(".prizeName",n).html(e.name),$(".prizeProvider",n).html(e.provided),$(".prizeMinDonation",n).html(f(e.minimumBid)),$(".prizeEnd",n).html(moment.unix(e.endTime/1e3).format("Do HH:mm")),a.append(n)}))})),nodecg.Replicant("bids").on("change",(e=>{var a=0;n.html(""),e.forEach((e=>{if(!(a>=2)){var s=o.clone();if($(".bidGame",s).html(e.game+" - "+e.category),$(".bidName",s).html(e.name),e.war)e.options.length?(e.options.forEach((e=>{s.append("<br>"+e.name+" ("+f(e.total)+")")})),e.allowUserOptions&&s.append("<br><i>Users can submit their own options.</i>")):s.append("<br><i>No options submitted yet.</i>");else{var i=e.goal-e.total;s.append("<br>"+f(e.total)+"/"+f(e.goal)),s.append("<br>"+f(i)+" to goal")}n.append(s),a++}}))}));var p=nodecg.Replicant("runDataArray","nodecg-speedcontrol"),c=nodecg.Replicant("runDataActiveRun","nodecg-speedcontrol"),m=nodecg.Replicant("runDataActiveRunSurrounding","nodecg-speedcontrol"),d=nodecg.Replicant("runFinishTimes","nodecg-speedcontrol"),g=!1,u=!1,v=!1;function h(){s.html("");for(var e=function(e){var a=-1;if(e)for(var n=0;n<p.value.length;n++)if(e.id===p.value[n].id){a=n;break}return a}(c.value),a=-1;a<2;a++){var n=p.value[e+a];if(n){var i=t.clone();-1===a?($(".justMissed",i).show(),d.value[m.value.previous]&&($(".gameFinal",i).html(d.value[m.value.previous].time),$(".gameFinal",i).show())):($(".justMissed",i).hide(),$(".gameFinal",i).hide()),$(".gameName",i).html(n.game),$(".gameCategory",i).html(n.category),$(".gameConsole",i).html(n.system),$(".gameRunners",i).html(b(n)),$(".gameTime",i).html(n.estimate),s.append(i)}}}function b(e){var a=[],n="No Player(s)";return e.teams.forEach((e=>{var n=[];e.players.forEach((e=>{n.push(e.name)})),a.push(n.join(", "))})),n.length&&(n=a.join(" vs. ")),n}function f(e,a){return e<1e3&&!a?"$"+e.toFixed(2):"$"+Math.floor(e).toLocaleString("en-US",{minimumFractionDigits:0})}d.on("change",(e=>{g=!0,!v&&g&&u&&(h(),v=!0)})),c.on("change",(e=>{u=!0,g&&u&&(h(),v=!0)}))}));