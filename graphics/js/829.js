"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[829],{2699:t=>{var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}v(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&v(t,"error",e,{once:!0})}(t,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function a(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var i,o,u,c;if(s(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),u=o[e]),void 0===u)u=o[e]=n,++t._eventsCount;else if("function"==typeof u?u=o[e]=r?[n,u]:[u,n]:r?u.unshift(n):u.push(n),(i=a(t))>0&&u.length>i&&!u.warned){u.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=u.length,c=f,console&&console.warn&&console.warn(c)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):d(i,i.length)}function h(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function v(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return a(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var u;if(e.length>0&&(u=e[0]),u instanceof Error)throw u;var s=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw s.context=u,s}var a=o[t];if(void 0===a)return!1;if("function"==typeof a)r(a,this,e);else{var c=a.length,f=d(a,c);for(n=0;n<c;++n)r(f[n],this,e)}return!0},o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,l(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,l(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,r,i,o,u;if(s(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){u=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,u||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},o.prototype.listeners=function(t){return p(this,t,!0)},o.prototype.rawListeners=function(t){return p(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):h.call(t,e)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},543:function(t,e,n){var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return u(e,t),e},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},f=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(n(8138)),l=s(n(8013)),p="nodecg-speedcontrol",h=function(t){function e(e){var n=t.call(this)||this;return n.runDataArray=e.Replicant("runDataArray",p),n.runDataActiveRun=e.Replicant("runDataActiveRun",p),n.runDataActiveRunSurrounding=e.Replicant("runDataActiveRunSurrounding",p),n.timer=e.Replicant("timer",p),n.runFinishTimes=e.Replicant("runFinishTimes",p),n.twitchCommercialTimer=e.Replicant("twitchCommercialTimer",p),n.timerChangesDisabled=e.Replicant("timerChangesDisabled",p),n.nodecg=e,n.timer.on("change",(function(t,e,r){l.onTimerChange(n,t,e,r)})),n}return i(e,t),e.prototype.getCurrentRun=function(){return f.default(this.runDataActiveRun.value)},e.prototype.getRunDataArray=function(){return f.default(this.runDataArray.value||[])},e.prototype.getNextRuns=function(t,e){void 0===t&&(t=4);var n=this.runDataActiveRunSurrounding.value?this.runDataActiveRunSurrounding.value.next:void 0,r=this.findRunIndex(e||n);return r=e?r+=1:r,this.getRunDataArray().slice(r,r+t)},e.prototype.findRunIndex=function(t){var e=t;return t&&"string"!=typeof t&&(e=t.id),this.getRunDataArray().findIndex((function(t){return t.id===e}))},e.prototype.startTimer=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){return[2,this.nodecg.sendMessageToBundle("timerStart",p)]}))}))},e.prototype.stopTimer=function(t){return void 0===t&&(t=0),a(this,void 0,void 0,(function(){var e,n;return c(this,(function(r){if((e=this.getCurrentRun())&&e.teams[t]&&(n=e.teams[t].id),e&&!n)throw new Error("Run is active but team with index "+t+" unavailable");return[2,this.nodecg.sendMessageToBundle("timerStop",p,{id:n})]}))}))},e.prototype.resetTimer=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){return[2,this.nodecg.sendMessageToBundle("timerReset",p)]}))}))},e.prototype.disableTimerChanges=function(){this.timerChangesDisabled.value=!0},e.prototype.enableTimerChanges=function(){this.timerChangesDisabled.value=!1},e.prototype.startTwitchCommercial=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){return[2,this.nodecg.sendMessageToBundle("twitchStartCommercial",p,{duration:t})]}))}))},e}(l.default);t.exports=h},829:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.SpeedcontrolUtilBrowser=e.SpeedcontrolUtilServer=e.SpeedcontrolUtil=void 0;var i=r(n(543)),o=r(n(1878));e.default=o.default,e.SpeedcontrolUtil=o.default,e.SpeedcontrolUtilServer=o.default,e.SpeedcontrolUtilBrowser=i.default},1878:function(t,e,n){var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return u(e,t),e},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,s)}a((r=r.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},f=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(n(8138)),l=s(n(8013)),p="nodecg-speedcontrol",h=function(t){function e(e){var n=t.call(this)||this;return n.runDataArray=e.Replicant("runDataArray",p),n.runDataActiveRun=e.Replicant("runDataActiveRun",p),n.runDataActiveRunSurrounding=e.Replicant("runDataActiveRunSurrounding",p),n.timer=e.Replicant("timer",p),n.runFinishTimes=e.Replicant("runFinishTimes",p),n.twitchCommercialTimer=e.Replicant("twitchCommercialTimer",p),n.timerChangesDisabled=e.Replicant("timerChangesDisabled",p),n.sendMessage=e.extensions[p].sendMessage,n.listenFor=e.extensions[p].listenFor,n.timer.on("change",(function(t,e,r){l.onTimerChange(n,t,e,r)})),n}return i(e,t),e.prototype.getCurrentRun=function(){return f.default(this.runDataActiveRun.value)},e.prototype.getRunDataArray=function(){return f.default(this.runDataArray.value)},e.prototype.getNextRuns=function(t,e){void 0===t&&(t=4);var n=this.findRunIndex(e||this.runDataActiveRunSurrounding.value.next);return n=e?n+=1:n,this.getRunDataArray().slice(n,n+t)},e.prototype.findRunIndex=function(t){var e=t;return t&&"string"!=typeof t&&(e=t.id),this.getRunDataArray().findIndex((function(t){return t.id===e}))},e.prototype.startTimer=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){return[2,this.sendMessage("timerStart")]}))}))},e.prototype.stopTimer=function(t){return void 0===t&&(t=0),a(this,void 0,void 0,(function(){var e,n;return c(this,(function(r){if((e=this.getCurrentRun())&&e.teams[t]&&(n=e.teams[t].id),e&&!n)throw new Error("Run is active but team with index "+t+" unavailable");return[2,this.sendMessage("timerStop",{id:n})]}))}))},e.prototype.resetTimer=function(){return a(this,void 0,void 0,(function(){return c(this,(function(t){return[2,this.sendMessage("timerReset")]}))}))},e.prototype.disableTimerChanges=function(){this.timerChangesDisabled.value=!0},e.prototype.enableTimerChanges=function(){this.timerChangesDisabled.value=!1},e.prototype.startTwitchCommercial=function(t){return a(this,void 0,void 0,(function(){return c(this,(function(e){return[2,this.sendMessage("twitchStartCommercial",{duration:t})]}))}))},e}(l.default);t.exports=h},8013:function(t,e,n){var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.onTimerChange=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.formPlayerNamesStr=function(t){return t.teams.map((function(t){return t.players.map((function(t){return t.name})).join(", ")})).join(" vs. ")||"N/A"},e.getRunTotalPlayers=function(t){return t.teams.reduce((function(t,e){return t+e.players.reduce((function(t){return t+1}),0)}),0)},e}(n(2699).EventEmitter);e.onTimerChange=function(t,e,n,r){if(n){var i=n.state,o=e.state;i!==o&&("running"===o?"paused"===i?t.emit("timerResumed"):"stopped"===i&&t.emit("timerStarted"):"finished"===o?t.emit("timerStopped"):"paused"===o?t.emit("timerPaused"):"stopped"===o&&t.emit("timerReset")),r&&r.forEach((function(n){if(["paused","stopped"].includes(o)&&i===o&&"/"===n.path&&"update"===n.method&&"milliseconds"===n.args.prop&&t.emit("timerEdited"),"/teamFinishTimes"===n.path){var r=n.args.prop,u=e.teamFinishTimes[r];"add"===n.method?t.emit("timerTeamStopped",r,"forfeit"===u.state):"delete"===n.method&&t.emit("timerTeamUndone",r)}}))}},e.default=o}}]);